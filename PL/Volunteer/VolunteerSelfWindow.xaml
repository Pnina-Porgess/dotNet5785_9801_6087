<Window x:Class="PL.Volunteer.VolunteerSelfWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="פרטי מתנדב" Height="650" Width="500"
        WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </Window.Resources>

    <StackPanel Margin="20" DataContext="{Binding}">
        <!-- פרטי מתנדב -->
        <StackPanel Orientation="Vertical" Margin="0,0,0,10">
            <TextBlock Text="שם מלא:"/>
            <TextBox Text="{Binding Volunteer.FullName}" />

            <TextBlock Text="טלפון:"/>
            <TextBox Text="{Binding Volunteer.Phone}" />

            <TextBlock Text="מייל:"/>
            <TextBox Text="{Binding Volunteer.Email}" />

            <TextBlock Text="כתובת נוכחית:"/>
            <TextBox Text="{Binding Volunteer.CurrentAddress}" />

            <TextBlock Text="מרחק מקסימלי:"/>
            <TextBox Text="{Binding Volunteer.MaxDistance}" />

            <TextBlock Text="פעיל:"/>
            <CheckBox IsChecked="{Binding Volunteer.IsActive}" />
        </StackPanel>

        <!-- כפתור בחירת קריאה – רק אם אין קריאה בטיפול -->
        <StackPanel Visibility="{Binding NoCurrentCall, Converter={StaticResource BoolToVis}}">
            <Button Content="בחירת קריאה"
                    Click="btnOpenCalls_Click"
                    Height="40"/>
        </StackPanel>

        <!-- תצוגת קריאה בטיפול -->
        <StackPanel Visibility="{Binding HasCurrentCall, Converter={StaticResource BoolToVis}}" Margin="0,20,0,0">
            <GroupBox Header="קריאה בטיפול" Margin="0,10">
                <StackPanel>
                    <TextBlock Text="{Binding Volunteer.CurrentCall.Description}" TextWrapping="Wrap" Margin="0,5"/>
                    <TextBlock Text="כתובת:" FontWeight="Bold"/>
                    <TextBlock Text="{Binding Volunteer.CurrentCall.Address}" />
                    <TextBlock Text="מרחק:" FontWeight="Bold"/>
                    <TextBlock Text="{Binding Volunteer.CurrentCall.DistanceFromVolunteer}" />
                    <TextBlock Text="סטטוס:" FontWeight="Bold"/>
                    <TextBlock Text="{Binding Volunteer.CurrentCall.Status}" />
                    <TextBlock Text="שעת התחלה:" FontWeight="Bold"/>
                    <TextBlock Text="{Binding Volunteer.CurrentCall.StartTime}" />
                </StackPanel>
            </GroupBox>

            <!-- פעולות קריאה -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10">
                <Button Content="סיום טיפול" Click="FinishCall_Click" Width="120" Margin="10,0"/>
                <Button Content="ביטול טיפול" Click="CancelCall_Click" Width="120" Margin="10,0"/>
            </StackPanel>
        </StackPanel>
        <Button Content="היסטוריית קריאות" Click="btnHistory_Click" Height="35" Width="88"/>
        <Button Content="עדכן פרטים" Click="Update_Click" Height="40" Width="77"/>

        <!-- כפתור עדכון כללי – תמיד מוצג -->

        <!-- כפתור היסטוריית קריאות – תמיד מוצג -->
    </StackPanel>
</Window>
