<Window x:Class="PL.Volunteer.VolunteerListWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Volunteer List"
        Height="700" Width="850"
        Background="White"
        DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}"
        Loaded="Window_Loaded" Closed="Window_Closed">

    <Window.Resources>
        <Color x:Key="TextBlueColor">#0D3F59</Color>
        <Color x:Key="OrangeColor">#FDB53B</Color>
        <Color x:Key="PinkColor">#CF5BA4</Color>
        <Color x:Key="GreenColor">#B3D36B</Color>
        <Color x:Key="LightBlueColor">#32A7DD</Color>

        <SolidColorBrush x:Key="TextBlueBrush" Color="{StaticResource TextBlueColor}" />
        <SolidColorBrush x:Key="OrangeBrush" Color="{StaticResource OrangeColor}" />
        <SolidColorBrush x:Key="PinkBrush" Color="{StaticResource PinkColor}" />
        <SolidColorBrush x:Key="GreenBrush" Color="{StaticResource GreenColor}" />
        <SolidColorBrush x:Key="LightBlueBrush" Color="{StaticResource LightBlueColor}" />

        <!-- סגנון לכותרות עמודות -->
        <Style x:Key="HeaderStyle" TargetType="GridViewColumnHeader">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="Background" Value="{StaticResource OrangeBrush}"/>
        </Style>
    </Window.Resources>

    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- כותרת -->
        <StackPanel Orientation="Horizontal" Grid.Row="0" HorizontalAlignment="Center" Margin="0,0,0,20">
            <TextBlock Text="רשימת מתנדבים"
                       Foreground="{StaticResource OrangeBrush}"
                       FontSize="28"
                       FontWeight="Bold"/>
        </StackPanel>

        <!-- סינון -->
        <Border Grid.Row="1"
                Margin="0,0,0,20"
                HorizontalAlignment="Left"
                Background="#F5F5F5"
                Padding="12,6"
                CornerRadius="8">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="🔎" FontSize="18" Margin="0,0,6,0" VerticalAlignment="Center"/>
                <Label Content="סוג קריאה:"
                       Foreground="{StaticResource PinkBrush}"
                       FontWeight="SemiBold"
                       VerticalAlignment="Center"
                       FontSize="15"/>
                <ComboBox SelectedItem="{Binding TypeOfReading, Mode=TwoWay}"
                          ItemsSource="{Binding Source={StaticResource VolunteerFieldCollection}}"
                          Width="180"
                          Margin="10,0,0,0"
                          Background="{StaticResource LightBlueBrush}"
                          Foreground="#0D3F59"
                          BorderThickness="0"
                          Height="32"
                          VerticalAlignment="Center"
                          SelectionChanged="ComboBox_SelectionChanged"/>
            </StackPanel>
        </Border>

        <!-- רשימת מתנדבים -->
        <ListView Grid.Row="2"
                  ItemsSource="{Binding VolunteerList}"
                  SelectedItem="{Binding SelectedVolunteer, Mode=TwoWay}"
                  MouseDoubleClick="ListView_MouseDoubleClick"
                  Background="#FFF"
                  BorderBrush="{StaticResource LightBlueBrush}"
                  BorderThickness="1"
                  Margin="0,0,0,20">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="🆔" Width="60"
                                    HeaderContainerStyle="{StaticResource HeaderStyle}">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Id}" Foreground="{StaticResource TextBlueBrush}" FontWeight="Bold" HorizontalAlignment="Center"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="✅ פעיל" Width="60"
                                    HeaderContainerStyle="{StaticResource HeaderStyle}">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding IsActive}" Foreground="{StaticResource TextBlueBrush}" HorizontalAlignment="Center"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="👤 שם מלא" Width="140"
                                    HeaderContainerStyle="{StaticResource HeaderStyle}">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding FullName}" Foreground="{StaticResource TextBlueBrush}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="📞 שיחות טופלו" Width="100"
                                    HeaderContainerStyle="{StaticResource HeaderStyle}">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding TotalHandledCalls}" Foreground="{StaticResource TextBlueBrush}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="❌ שיחות בוטלו" Width="100"
                                    HeaderContainerStyle="{StaticResource HeaderStyle}">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding TotalCancelledCalls}" Foreground="{StaticResource TextBlueBrush}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="⏰ שיחות שפגו" Width="100"
                                    HeaderContainerStyle="{StaticResource HeaderStyle}">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding TotalExpiredCalls}" Foreground="{StaticResource TextBlueBrush}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="☎️ מס' שיחה" Width="80"
                                    HeaderContainerStyle="{StaticResource HeaderStyle}">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding CurrentCallId}" Foreground="{StaticResource TextBlueBrush}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="📚 סוג קריאה" Width="100"
                                    HeaderContainerStyle="{StaticResource HeaderStyle}">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding CurrentCallType}" Foreground="{StaticResource TextBlueBrush}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <!-- עמודת מחיקה לכל שורה -->
                    <GridViewColumn Header="מחק🗑️" Width="80"
                                    HeaderContainerStyle="{StaticResource HeaderStyle}">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="🗑️"
                    Click="DeleteButton_Click"
                    Foreground="{StaticResource TextBlueBrush}"
                    FontWeight="Bold"
                    BorderThickness="0"
                    Cursor="Hand"
                    Padding="4,2"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView>

        <!-- כפתור הוספה בלבד -->
        <Button Content="➕ הוספת מתנדב"
                Grid.Row="3"
                Width="200"
                Height="45"
                Background="{StaticResource OrangeBrush}"
                Foreground="{StaticResource TextBlueBrush}"
                FontWeight="Bold"
                FontSize="16"
                BorderThickness="0"
                Margin="0,0,0,10"
                HorizontalAlignment="Center"
                Cursor="Hand"
                Click="AddButton_Click">
            <Button.Template>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}" 
                            CornerRadius="22">
                        <ContentPresenter HorizontalAlignment="Center" 
                                          VerticalAlignment="Center"/>
                    </Border>
                </ControlTemplate>
            </Button.Template>
        </Button>
    </Grid>
</Window>