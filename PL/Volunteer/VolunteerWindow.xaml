<Window x:Class="PL.Volunteer.VolunteerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:PL.Volunteer"
        xmlns:bo="clr-namespace:BO;assembly=BL"
        Title="Volunteer" Height="650" Width="450"
        DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <ObjectDataProvider x:Key="RoleValues" MethodName="GetValues" ObjectType="{x:Type sys:Enum}" xmlns:sys="clr-namespace:System;assembly=mscorlib">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="bo:Role"/>
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>

        <ObjectDataProvider x:Key="DistanceTypeValues" MethodName="GetValues" ObjectType="{x:Type sys:Enum}" xmlns:sys="clr-namespace:System;assembly=mscorlib">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="bo:DistanceType"/>
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>
    </Window.Resources>

    <ScrollViewer>
        <Grid Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- Volunteer Details -->
                <RowDefinition Height="Auto"/>
                <!-- Current Call -->
                <RowDefinition Height="Auto"/>
                <!-- Button -->
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- פרטי מתנדב -->
            <StackPanel Grid.Row="0" Grid.ColumnSpan="2">
                <Label Grid.Row="0" Grid.Column="0" Content="Volunteer ID:"/>
                <TextBox Grid.Row="0" Grid.Column="1"
         Text="{Binding CurrentVolunteer.Id, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
         IsEnabled="{Binding ButtonText, Converter={StaticResource UpdateModeToBoolConverter}}"/>

                <Label Content="Full Name:"/>
                <TextBox Text="{Binding CurrentVolunteer.FullName, Mode=TwoWay}"/>

                <Label Content="Phone:"/>
                <TextBox Text="{Binding CurrentVolunteer.Phone, Mode=TwoWay}"/>

                <Label Content="Email:"/>
                <TextBox Text="{Binding CurrentVolunteer.Email, Mode=TwoWay}"/>

                <Label Content="Password:"/>
                <TextBox Text="{Binding CurrentVolunteer.Password, Mode=TwoWay}"/>

                <Label Content="Address:"/>
                <TextBox Text="{Binding CurrentVolunteer.CurrentAddress, Mode=TwoWay}"/>

                <Label Content="Is Active:"/>
                <CheckBox IsChecked="{Binding CurrentVolunteer.IsActive, Mode=TwoWay}"/>

                <Label Content="Role:"/>
                <ComboBox ItemsSource="{Binding Source={StaticResource RoleValues}}"
                          SelectedItem="{Binding CurrentVolunteer.Role, Mode=TwoWay}"/>

                <Label Content="Distance Type:"/>
                <ComboBox ItemsSource="{Binding Source={StaticResource DistanceTypeValues}}"
                          SelectedItem="{Binding CurrentVolunteer.DistanceType, Mode=TwoWay}"/>

                <Label Content="Max Distance:"/>
                <TextBox Text="{Binding CurrentVolunteer.MaxDistance, Mode=TwoWay}"/>
            </StackPanel>

            <!-- תצוגת קריאה בטיפול -->
            <StackPanel Grid.Row="1" Grid.ColumnSpan="2" Margin="0,20,0,0"
                        Visibility="{Binding CurrentVolunteer.CurrentCall, Converter={StaticResource NotNullToVisible}}">
                <GroupBox Header="קריאה בטיפול">
                    <StackPanel>
                        <TextBlock Text="תיאור:" FontWeight="Bold"/>
                        <TextBlock Text="{Binding CurrentVolunteer.CurrentCall.Description}" TextWrapping="Wrap" Margin="0,5"/>
                        <TextBlock Text="כתובת:" FontWeight="Bold"/>
                        <TextBlock Text="{Binding CurrentVolunteer.CurrentCall.Address}" />
                        <TextBlock Text="מרחק:" FontWeight="Bold"/>
                        <TextBlock Text="{Binding CurrentVolunteer.CurrentCall.DistanceFromVolunteer}" />
                        <TextBlock Text="סטטוס:" FontWeight="Bold"/>
                        <TextBlock Text="{Binding CurrentVolunteer.CurrentCall.Status}" />
                        <TextBlock Text="שעת התחלה:" FontWeight="Bold"/>
                        <TextBlock Text="{Binding CurrentVolunteer.CurrentCall.StartTime}" />
                    </StackPanel>
                </GroupBox>
            </StackPanel>

            <!-- כפתור הוספה / עדכון -->
            <Button Grid.Row="2" Grid.ColumnSpan="2" Margin="0,30,0,0"
                    Content="{Binding ButtonText}" Click="btnAddUpdate_Click"
                    HorizontalAlignment="Center" Width="150" Height="40"/>
        </Grid>
    </ScrollViewer>
</Window>
