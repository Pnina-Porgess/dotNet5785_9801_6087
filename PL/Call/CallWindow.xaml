<Window x:Class="PL.Call.CallWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}"
        Title="Call Management" Height="600" Width="450">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="20">
            <StackPanel>

                <!-- Call ID -->
                <Label Content="Call ID:" />
                <TextBox Text="{Binding CurrentCall.Id}" IsReadOnly="True" IsEnabled="False"/>

                <!-- Description -->
                <Label Content="Description:" />
                <TextBox Text="{Binding CurrentCall.Description, Mode=TwoWay}" 
                         IsEnabled="{Binding CanEditDetails}" />

                <!-- Type -->
                <Label Content="Call Type:" />
                <ComboBox SelectedItem="{Binding CurrentCall.Type, Mode=TwoWay}"
                          ItemsSource="{StaticResource VolunteerFieldCollection}" 
                          IsEnabled="{Binding CanEditDetails}" />

                <!-- Address -->
                <Label Content="Address:" />
                <TextBox Text="{Binding CurrentCall.Address, Mode=TwoWay}" 
                         IsEnabled="{Binding CanEditDetails}" />

                <!-- Max End Time -->
                <Label Content="Max End Time:" />
                <DatePicker SelectedDate="{Binding CurrentCall.MaxEndTime, Mode=TwoWay}" 
                            IsEnabled="{Binding CanEditMaxEndTime}" />

                <!-- Status -->
                <Label Content="Status:" />
                <TextBlock Text="{Binding CurrentCall.Status}" />

                <!-- Opening Time -->
                <Label Content="Opening Time:" />
                <TextBlock Text="{Binding CurrentCall.OpeningTime}" />

                <!-- Previous Assignments -->
                <Label Content="Previous Assignments (read-only):" />
                <ItemsControl ItemsSource="{Binding CurrentCall.Assignments}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderThickness="1" BorderBrush="Gray" Margin="0,2">
                                <StackPanel Margin="5">
                                    <Label Content="Volunteer Name:" />
                                    <TextBlock Text="{Binding VolunteerName}" />
                                    <Label Content="Start Time:" />
                                    <TextBlock Text="{Binding AssignmentStartTime}" />
                                    <Label Content="End Time:" />
                                    <TextBlock Text="{Binding AssignmentEndTime}" />
                                    <Label Content="Completion Type:" />
                                    <TextBlock Text="{Binding CompletionType}" />
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <!-- Save Button -->
                <Button Content="{Binding ButtonText}" Click="btnAddUpdate_Click" 
                        Margin="0,20,0,0" Height="47"/>

            </StackPanel>
        </Grid>
    </ScrollViewer>
</Window>
