<Window x:Class="PL.Call.CallWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}"
        Title="ניהול קריאה" Height="600" Width="450">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="20">
            <StackPanel>

                <!-- תיאור -->
                <Label Content="תיאור:" />
                <TextBox Text="{Binding CurrentCall.Description, Mode=TwoWay}" 
                         IsEnabled="{Binding CanEditDetails}" />

                <!-- סוג קריאה -->
                <Label Content="סוג הקריאה:" />
                <ComboBox SelectedItem="{Binding CurrentCall.Type, Mode=TwoWay}"
                          ItemsSource="{StaticResource VolunteerFieldCollection}" 
                          IsEnabled="{Binding CanEditDetails}" />

                <!-- כתובת -->
                <Label Content="כתובת:" />
                <TextBox Text="{Binding CurrentCall.Address, Mode=TwoWay}" 
                         IsEnabled="{Binding CanEditDetails}" />

                <!-- זמן מקסימלי לסיום -->
                <Label Content="זמן מקסימלי לסיום:" />
                <DatePicker SelectedDate="{Binding CurrentCall.MaxEndTime, Mode=TwoWay}" 
                            IsEnabled="{Binding CanEditMaxEndTime}" />

                <!-- סטטוס לצפייה בלבד -->
                <Label Content="סטטוס:" />
                <TextBlock Text="{Binding CurrentCall.Status}" />

                <!-- זמן פתיחה לצפייה בלבד -->
                <Label Content="זמן פתיחה:" />
                <TextBlock Text="{Binding CurrentCall.OpeningTime}" />

                <!-- הקצאות קודמות -->
                <Label Content="הקצאות קודמות צפייה בלבד:" />
                <ItemsControl ItemsSource="{Binding CurrentCall.Assignments}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderThickness="1" BorderBrush="Gray" Margin="0,2">
                                <StackPanel Margin="5">
                                    <Label Content="שם :" />
                                    <TextBlock Text="{Binding VolunteerName}" />
                                    <Label Content="זמן פתיחה:" />
                                    <TextBlock Text="{Binding AssignmentStartTime}" />
                                    <Label Content="זמן סיום:" />
                                    <TextBlock Text="{Binding AssignmentEndTime}" />
                                    <Label Content=" סוג הביצוע:" />
                                    <TextBlock Text="{Binding CompletionType}" />
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <!-- כפתור -->
                <Button Content="{Binding ButtonText}" Click="btnAddUpdate_Click" 
                        Margin="0,20,0,0" Height="47"/>

            </StackPanel>
        </Grid>
    </ScrollViewer>
</Window>
