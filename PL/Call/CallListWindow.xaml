<Window x:Class="PL.Call.CallListWindow"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
     xmlns:local="clr-namespace:PL.Call"
     mc:Ignorable="d"
     Title="CallListWindow" Height="640" Width="800"
     DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}"
     Loaded="Window_Loaded" Closed="Window_Closed">

    <!--External Grid-->
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="23*"/>
            <RowDefinition Height="40*"/>
            <RowDefinition Height="249*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <!--Internal, Upper Grid-->
        <Grid HorizontalAlignment="Stretch" Height="auto" Grid.Row="0" VerticalAlignment="Stretch" Width="auto">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Label Content="📋 Sort:" HorizontalAlignment="Left" Margin="69,0,0,0" VerticalAlignment="Center" Grid.Column="0"/>
            <ComboBox
                 SelectedItem="{Binding CallType, Mode=TwoWay}"
                   ItemsSource="{Binding Source={StaticResource CallFieldCollectionKey}}"
                   HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Column="1" SelectionChanged="ComboBox_SelectionChanged"/>
        </Grid>
        <ListView Margin="5,5,5,65" 
                 Grid.Row="1"  ItemsSource="{Binding Path=CallList}"  
                  SelectedItem="{Binding SelectedCall}" 
                  MouseDoubleClick="ListView_MouseDoubleClick"
                  Background="White"
                  
               BorderThickness="1" Grid.RowSpan="2">
            <ListView.View>
                <GridView>
             
                 
             
                    <GridViewColumn Header="RemainingTime" Width="80">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <TextBlock Text="" Margin="0,0,5,0"/>
                                    <TextBlock Text="{Binding RemainingTime}"/>
                                </StackPanel>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="LastVolunteerName" Width="80">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <TextBlock Text="" Margin="0,0,5,0"/>
                                    <TextBlock Text="{Binding LastVolunteerName}"/>
                                </StackPanel>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="CompletionTime" Width="80">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <TextBlock Text="" Margin="0,0,5,0"/>
                                    <TextBlock Text="{Binding CompletionTime}"/>
                                </StackPanel>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="CallStatus" Width="80">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <TextBlock Text="" Margin="0,0,5,0"/>
                                    <TextBlock Text="{Binding CallStatus}"/>
                                </StackPanel>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="TotalAssignments" Width="80">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <TextBlock Text="" Margin="0,0,5,0"/>
                                    <TextBlock Text="{Binding TotalAssignments}"/>
                                </StackPanel>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="מחק🗑️" Width="80">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="🗑️"
                                Click="DeleteButton_Click"
                              />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView>
        <Button Content="Add"
        Grid.Row="2"
        HorizontalAlignment="Left"
        Height="50"
        Width="100"
        Margin="102,438,0,10"
        Click="AddButton_Click"/>
    </Grid>

</Window>
